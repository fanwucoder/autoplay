-- 项目公用函数
require("TSLib")
require("tools")
PACKAGES = {"com.hegu.dnl.mi", "com.hegu.dnl.sn79"}
-- appType类型
APP_XM = 1 -- 小米
APP_SS = 2 -- 上士
H = {}
-- 原始偏色格式
H["进副本"] = {
    {"副本返回", 0.9, 19, 30, 40, 60, "0x273755-0x111111", "7|9|0xBE9E6B-0x111111"},
    {"开始挑战", 0.9, 1003, 614, 1022, 648, "0xEDA314-0x111111", "0|14|0xDA8C11-0x111111"},
    {"血条", 0.8,83, 38, 91, 65, "0xb81512", "-1|14|0x16376a"},
    {"未通关", 0.9, 27, 261, 52, 290, "0x4C4C4C", "-3|14|0xD0D0D0"},
    {"选择卡牌", 0.9, 556, 35, 575, 59, "0x131939-0x111111", "2|7|0xffffff-0x111111,0|11|0x161538-0x111111"},
    {"再来一次", 0.9, 1043, 128, 1051, 139, "0x1F286E-0x111111", "1|4|0xF2F2F5-0x111111,-1|8|0x172062-0x111111"},
    {"神秘商人", 0.9, 1067, 619, 1088, 654, "0x09101F-0x111111", "1|5|0xCCAB72-0x111111,-2|8|0x0D1320-0x111111"},
    {"神秘商人1", 0.9, 1097, 92, 1124, 125, "0x101A28-0x111111", "0|6|0x95724C-0x111111,-2|15|0x101A28-0x111111"},
    {"神秘商人2", 0.9, 875, 64, 891, 82, "0x101A28-0x111111", "-1|4|0xECCBA5-0x111111,-5|7|0x101A28-0x111111"},
    {"图刷完了",{{1186, 48, 0x162168},{1197, 143, 0x2e2b29},{1200, 241, 0xd58914}},{1100, 55}},
    {"变强卡屏",{{778, 450, 0x101a28},{804, 458, 0x15418a},{919, 209, 0x101a28},{918, 189, 0xc2a171}},{917,191}},
    {"自动副本",{{34, 268, 0xffd278},{48, 268, 0xffffbb},{40, 286, 0xffff67},{27, 277, 0xffbb2a}},{0,0}}
}
-- H["进副本"] = {
--     {"副本返回", {{26, 40, 0x202f49}, {29, 47, 0x5b411a}, {23, 51, 0x17253a}}, {26, 40}},
--     {"开始挑战", 0.9, 1003, 614, 1022, 648, "0xDC9203-0xFEB425", "0|14|0xC97B00-0xEB9D22"},
--     {"血条", 0.8, 83, 38, 91, 65, "0xA70401-0xC92623", "-1|14|0x052659-0x27487B"},
--     {"未通关", 0.9, 27, 261, 52, 290, "0x3B3B3B-0x5D5D5D", "-3|14|0xBFBFBF-0xE1E1E1"},
--     {"选择卡牌", 0.9, 556, 35, 575, 59, "0x020828-0x242A4A", "2|7|0xEEEEEE-0xFFFFFF,0|11|0x050427-0x272649"},
--     {"再来一次", 0.9, 1043, 128, 1051, 139, "0x0E175D-0x30397F", "1|4|0xE1E1E4-0xFFFFFF,-1|8|0x060F51-0x283173"},
--     {"神秘商人", 0.9, 1067, 619, 1088, 654, "0x00000E-0x1A2130", "1|5|0xBB9A61-0xDDBC83,-2|8|0x00020F-0x1E2431"},
--     {"神秘商人1", 0.9, 1097, 92, 1124, 125, "0x000917-0x212B39", "0|6|0x84613B-0xA6835D,-2|15|0x000917-0x212B39"},
--     {"神秘商人2", 0.9, 875, 64, 891, 82, "0x000917-0x212B39", "-1|4|0xDBBA94-0xFDDCB6,-5|7|0x000917-0x212B39"}
-- }
H["登录广告"] = {
    {"活动广告", 0.9, 1225, 2, 1279, 67, "0xE1C193-0x111111", "9|9|0xC0A070-0x111111,19|19|0xA07741-0x111111"},
    {"福利", 0.9, 1098, 111, 1145, 161, "0xE8D18B-0x111111", "9|10|0xC4A475-0x111111,21|21|0xA07842-0x111111"},
    {"精力", 70,89, 0, 126, 42, "0x00ff00-0x111111", "8|23|0x254432-0x111111,12|21|0x677418-0x111111"},
        -- {"精力", 70,89, 0, 126, 42, "0x00ff00-0x11ee11", "8|23|0x143321-0x365543,12|21|0x566307-0x788529"},
    {"电池", 0.9, 87, 0, 120, 15, "0x005A00-0x111111", "4|6|0x005800-0x111111"}
    
}
-- H["登录广告"] = {
--     {"活动广告", 0.9, 1225, 2, 1279, 67, "0xD0B082-0xF2D2A4", "9|9|0xAF8F5F-0xD1B181,19|19|0x8F6630-0xB18852"},
--     {"福利", 0.9, 1098, 111, 1145, 161, "0xD7C07A-0xF9E29C", "9|10|0xB39364-0xD5B586,21|21|0x8F6731-0xB18953"},
--     {"精力", 90, 89, 0, 126, 42, "0x00EE00-0x11FF11", "8|23|0x143321-0x365543,12|21|0x566307-0x788529"},
--     {"电池", 0.9, 87, 0, 120, 15, "0x004900-0x116B11", "4|6|0x004700-0x116911"}
-- }

H["登录界面"] = {
    {"上士登录按钮", 0.9, 603, 399, 625, 422, "0xFFFFFF-0x111111", "-4|2|0xFF6D2D-0x111111,0|5|0xFFFFFF-0x111111"},
    {
        "登录按钮",
        0.8,
        608,
        588,
        682,
        631,
        "0x144393-0x000000",
        "-7|-2|0xC7CDD7-0x000000,-15|6|0xCECECF-0x000000,13|-1|0x144495-0x000000"
    },
    {
        0,
        0,
        "0x1A2942-0x000000",
        "-2|-12|0x080C13-0x000000,-5|-11|0xFFFFFF-0x000000,6|-9|0xFFFFFF-0x000000"
    },
    {
        "进入游戏",
        0.8,
        542,
        485,
        656,
        549,
        "0xFFFDF5-0x000000",
        "-2|8|0xFDF6D6-0x000000,30|25|0xF98C41-0x000000,25|2|0xF75520-0x000000,40|14|0xFB7440-0x000000"
    },
    {
        "进入游戏1",
        0.8,
        623,
        652,
        664,
        681,
        "0x9A2818-0x000000",
        "0|10|0x9C3822-0x000000,0|14|0xEEDD99-0x000000,8|14|0xF3D298-0x000000"
    }
}
-- H["登录界面"] = {
--     {"上士登录按钮", 0.9, 603, 399, 625, 422, "0xEEEEEE-0xFFFFFF", "-4|2|0xEE5C1C-0xFF7E3E,0|5|0xEEEEEE-0xFFFFFF"},
--     {
--         "登录按钮",
--         0.8,
--         608,
--         588,
--         682,
--         631,
--         "0x144393-0x144393",
--         "-7|-2|0xC7CDD7-0xC7CDD7,-15|6|0xCECECF-0xCECECF,13|-1|0x144495-0x144495"
--     },
--     {
--         "进入游戏",
--         0.8,
--         542,
--         485,
--         656,
--         549,
--         "0xFFFDF5-0xFFFDF5",
--         "-2|8|0xFDF6D6-0xFDF6D6,30|25|0xF98C41-0xF98C41,25|2|0xF75520-0xF75520,40|14|0xFB7440-0xFB7440"
--     },
--     {
--         "进入游戏1",
--         0.8,
--         623,
--         652,
--         664,
--         681,
--         "0x9A2818-0x9A2818",
--         "0|10|0x9C3822-0x9C3822,0|14|0xEEDD99-0xEEDD99,8|14|0xF3D298-0xF3D298"
--     }
-- }

H["上士登录页"] = {
    {"登录按钮", {{1037, 295, 0x000000}, {756, 419, 0xff6d2d}, {765, 183, 0xededed}}, {633, 419}},
    {"绑定手机", {{1007, 527, 0x000000}, {912, 521, 0xededed}, {762, 519, 0xff6d2d}}, {876, 160}},
    {"公告", {{684, 603, 0x124498}, {751, 606, 0x101a28}, {703, 101, 0x1c2d49}, {623, 98, 0xffffff}}, {650, 602}},
    {"排队", {{689, 457, 0x104eb5}, {662, 385, 0x263653}, {1176, 57, 0x2f100f}}, {0, 0}},
    {
        "游戏登录按钮",
        {{113, 52, 0x152740}, {102, 43, 0xf4f6f7}, {1171, 59, 0x89312a}, {1169, 82, 0xf8f880}, {638, 497, 0xf3401c}},
        {633, 515}
    },
    {"邮件",0.9, 412, 350, 499, 625,"0x2f73ac","-3|16|0xd90100,-3|31|0x0c2745,7|9|0xf2e3c9"},
    {"角色选择", {{564, 23, 0xffffff}, {73, 42, 0xbfa476}, {96, 23, 0x324366}, {582, 654, 0x882414}}, {0, 0}},
    {"广告1", {{103, 9, 0x005900}, {1256, 29, 0xc3a374}, {1242, 39, 0xbc9761}}, {1249, 33}},
    {"广告2", {{1119, 134, 0xc0a06f}, {1065, 131, 0x101a28}, {700, 105, 0x1f2f4e}}, {1121, 136}},
    {"登录完成", {{102, 8, 0x00ff00}, {107, 29, 0x133532}, {109, 59, 0xdd9b58}}, {0, 0}},
    {"邮箱", {{507, 589, 0xd90906}, {507, 605, 0x0c2644}, {513, 574, 0x3678af}}, {507, 589}},
    {"决斗段位",{{597, 654, 0x153f87}, {656, 651, 0xffffff}, {637, 564, 0x371518}, {932, 317, 0xb6232d}},{643, 654}},
    {"登录人满",{{1173, 57, 0x2d100e},{725, 248, 0x101a28},{699, 476, 0x134393},{108, 53, 0x070e16}},{641,481}},
    {"拜师",{{717, 277, 0x101a28},{603, 448, 0x12469c},{826, 457, 0x163f88},{104, 8, 0x005c00}},{524,460}},
    {"决斗段位1",{{694, 648, 0x1148a3},{822, 648, 0x280d0f},{756, 100, 0xffcf7b},{640, 90, 0xe5a36a}},{643, 654}}
}
H["分解装备"] = {
    {"分解确认", 0.8, 793, 359, 829, 586, "0x114bac", "-2|26|0x183b76"},


    -- {"分解确认", 0.8, 793, 359, 829, 586, "0x003A9B-0x225CBD", "-2|26|0x072A65-0x294C87"},
    {"分解完成", {{885, 146, 0xe4c696}, {893, 157, 0xbf9b69}, {902, 163, 0xa17a43}, {891, 139, 0x101a28}}, {893, 154}}
}
function startApp(appType)
    local package = PACKAGES[appType]
    local ret = runApp(package, true)
    nLog("启动应用:" .. APP_XM .. "启动结果：" .. ret)

    return ret == 0
end

function startSS()
    local ret = runApp(PACKAGES[APP_SS])
    mSleep(2000)
    if ret == 0 then
        if waitPic1(598, 146, 680, 197, "start_ok.png", 120, 20) ~= true then
            nLog("账号首次登录启动app成功")
            return false
        end
        if waitPic1(391, 331, 520, 382, "ss_fisrt_login.png", 1, 1) then
            nLog("账号首次登录启动app成功")
            return true
        end

        if waitPic1(602, 399, 672, 435, "ss_login.png", 1, 1) then
            nLog("启动app成功")
            return true
        end
    end
    return true
end
function startToAccount()
    if startSS() ~= true then
        return false
    end

    if waitPic1(391, 331, 520, 382, "ss_fisrt_login.png", 3, 1) then
        nLog("账号首次登录启动app成功")
        randomTap(815, 408)
    else
        randomTap(788, 502)
    end
    rndSleep(300, 600)
    randomTap(817, 421)
    rndSleep(300, 600)
    return true
end

function stopSSApp()
    closeApp(PACKAGES[APP_SS])
    rndSleep(3000, 5000)
end
